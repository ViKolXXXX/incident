{% extends "base.html" %}
{% load static %}
{% block title %}Журнал{% endblock title %}
{% block name_page %}<i class="far fa-book"></i>&nbsp;Журнал{% endblock name_page %}
{% block breadcrumbs %}
	<li><a class="current" href={% url 'journal' %}>События</a></li>
{% endblock breadcrumbs %}
{% block content %}
<div class="row d-flex justify-content-center my-4" style="height:700px;overflow-y:auto;">
	<div class="col-12">
		<table id="id_table_event" class="table table-striped table-bordered compact-table" style="width:100%">
				<thead>
				<tr>
					<th>Тип обращения</th>
					<th>Статус</th>
					<th>Дата регистрации</th>
					<th>Кл.признак(по статье УК)</th>
					<th>Кл.признак(угроза)</th>
					<th>Дата окончания</th>
					<th>Исполнитель(орган)</th>
					<th>Установлены лица</th>
					<th>Подразделение</th>
					<th>Действие</th>
				</tr>
				</thead>
				<tbody>
				{% for event  in events %}
					<tr>
						<td>{{ event.type_message }}</td>
						<td>{{ event.status }}</td>
						<td>{{ event.date_registratsii }}</td>
						<td>{{ event.klassif_priznak_UK.name }}</td>
						<td>{{ event.klassif_priznak_ugroza.name }}</td>
						<td>{{ event.date_finish }}</td>
						<td>{{ event.ispolnitel_organ }}</td>
						<td>{{ event.identified_face }}</td>
						<td>{{ event.subdivision.name }}</td>
						<td>
							<div class="btn-group" role="group" aria-label="Basic example">
								<a type="button" class="btn btn-secondary" title="Редактировать" href="{% url "change_event" %}?event_id={{ event.id }}">
									<i class="far fa-edit"></i> </a>
								<a type="button" class="btn btn-secondary" title="Удалить" href="{% url "delete_event" %}?event_id={{ event.id }}"><i class="far fa-1x fa-trash-alt"></i></a>
							</div>
						</td>
					</tr>
				{% endfor %}
			</table>
	</div>
</div>
{% endblock content %}
{% block js %}
	<script>
        $(document).ready(function () {
            $('#id_table_event').DataTable(
                {
                    "pageLength": 5,
                    "lengthChange": false,
                    "language": {
                        "url": "{% static "vendor/data_tables/ru.json" %}"
                    }
                }
            );
        });
	</script>
{% endblock js %}